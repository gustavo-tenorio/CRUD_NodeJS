<%- include('./partials/head') %>
<body>
    <div class="conteudo">
        <h1>Registros</h1>
        <a href="/">Cadastrar</a>
        <table>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Email</th>
                <th>Idade</th>
                <th>Ações</th>
            </tr>
            <% cadastros.forEach(cadastros =>{ %>
            <tr>
                <td><%=cadastros.id%></td>
                <td><%=cadastros.nome%></td>
                <td><%=cadastros.email%></td>
                <td><%=cadastros.idade%></td>
                <td>
                    <button id="editar">Editar</button>
                    <form action="/registros/delete" method="POST" style="display: inline;" onsubmit="confirmarDelete(event, this)">
                        <input type="hidden" value="<%=cadastros.id%>" name="id">
                        <button id="deletar">Deletar</button>
                    </form>
                </td>
            </tr>
            <% }) %>
            
        </table>
    </div>
   
</body>
<script>
    function confirmarDelete(event , form){
        event.preventDefault();
        let decision = confirm("Você realmente deseja deletar esse cadastro?");

        if(decision){
            form.submit();
        }else{
            window.alert("Cadastro não deletado!");
        }
    } 
</script>
</html>